<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MapBox</title>
        <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900italic,900' rel='stylesheet' type='text/css'>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
            crossorigin="anonymous">
            <script src='https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js'></script>
            <link href='https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.css' rel='stylesheet' />
    </head>
    <body style="background-color: #fff3d0; font-family: roboto; font-weight: bold;">
        <div class="container-xll">
            <nav class="navbar navbar-expand-lg bg-body-tertiary" style="background-color: #6f42c1">
                <div class="container-fluid col-10">
                    <a href="/tasks/" style="text-decoration: none; color: #000; margin-right: 10px;">Voltalia</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggle-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">

                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="btn btn-outline-light" href="/tasks/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a type="button" class="btn btn-outline-light" href="{% url 'heat_map' %}" style="margin-right: 10px;">HeatMap</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div style="display: grid; justify-content: center; align-items: center;">
                <h1>Longitude: <span id="longitude">{{ localizacao.longitude }}</span></h1> 
                <h1>Latitude: <span id="latitude">{{ localizacao.latitude }}</span></h1> 
                <br>
                <div id='map' style='width: 600px; height: 500px; border: #000 solid 2px; justify-content: center; align-items: center;'></div>
                <div style="display: flex; margin-top: 10px; justify-content: center; align-self: center;">
                    <button class="btn btn-warning" ><a style="text-decoration: none;" href="/tasks/">Voltar</a></button>
                </div>
            </div>
        </div>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script>
        // TO MAKE THE MAP APPEAR YOU MUST
        // ADD YOUR ACCESS TOKEN FROM
        // https://account.mapbox.com
        mapboxgl.accessToken = 'pk.eyJ1IjoieGRpZGl1eCIsImEiOiJjbGZoMHQxOW0xMjFuM3FvaG5nZXAxbTIwIn0.DrWwtg8a2y8i7-BhOdooeQ';
        var lng = document.getElementById("longitude").innerText
        var lat = document.getElementById("latitude").innerText
        console.log('longitude: ' + lng)
        console.log('latitude: ' + lat)
        const map = new mapboxgl.Map({
            container: 'map', // container ID
            style: 'mapbox://styles/mapbox/streets-v12', // style URL
            center: [lng, lat], // starting position [lng, lat]
            zoom: 5, // starting zoom
        });
        var marker = new mapboxgl.Marker().setLngLat([lng, lat]).addTo(map)
    </script>
</html>